<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carton Entry</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="header">
        <img src="siemens-logo.png" alt="Siemens Logo" class="logo">
        <h1>Carton Entry</h1>
        <nav>
            <a href="index.html">Home</a>
            <a href="entry.html">MCB Entry</a>
            <a href="carton-entry.html">Carton Entry</a>
            <a href="physical-counting.html">Physical Counting</a>
        </nav>
    </div>
    <div class="content">
        <div class="container">
            <form id="carton-entry-form">
                <div class="form-group">
                    <label for="carton-id">Carton ID</label>
                    <input type="text" id="carton-id">
                </div>
                <div class="form-group">
                    <label for="carton-description">Carton Description</label>
                    <input type="text" id="carton-description">
                </div>
                <div class="form-group">
                    <label for="carton-quantity">Quantity</label>
                    <input type="number" id="carton-quantity" min="1">
                </div>
                <button type="button" id="add-carton-entry">Add Entry</button>
            </form>
            <table id="carton-entry-table">
                <thead>
                    <tr>
                        <th>Carton ID</th>
                        <th>Description</th>
                        <th>Quantity</th>
                        <th>Edit</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
            <div class="action-buttons">
                <button type="button" id="preview-carton-file">Preview Carton File</button>
                <button type="button" id="generate-carton-file" style="display: none;">Generate Carton File</button>
            </div>
            <table id="files-table">
                <thead>
                    <tr>
                        <th>File Name</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
    </div>
    <script>
        const cartonIdInput = document.getElementById('carton-id');
        const cartonDescriptionInput = document.getElementById('carton-description');
        const cartonQuantityInput = document.getElementById('carton-quantity');
        const cartonEntryTableBody = document.getElementById('carton-entry-table').querySelector('tbody');
        const filesTableBody = document.getElementById('files-table').querySelector('tbody');
        const previewCartonFileButton = document.getElementById('preview-carton-file');
        const generateCartonFileButton = document.getElementById('generate-carton-file');
        const allCartonEntries = [];
        let cartonCount = 0;

        function generateCartonName() {
            const today = new Date();
            const datePart = today.toISOString().split('T')[0].replace(/-/g, '');
            cartonCount++;
            return `${datePart}-${cartonCount}`;
        }

        document.getElementById('add-carton-entry').addEventListener('click', () => {
            const cartonId = cartonIdInput.value;
            const cartonDescription = cartonDescriptionInput.value;
            const cartonQuantity = cartonQuantityInput.value;

            if (!cartonId || !cartonDescription || !cartonQuantity) {
                alert('Please fill all fields before adding entry.');
                return;
            }

            const entry = { cartonId, cartonDescription, cartonQuantity };
            allCartonEntries.push(entry);

            cartonEntryTableBody.innerHTML = '';
            const lastEntry = allCartonEntries[allCartonEntries.length - 1];
            const row = document.createElement('tr');
            row.innerHTML = `<td>${lastEntry.cartonId}</td><td>${lastEntry.cartonDescription}</td><td>${lastEntry.cartonQuantity}</td><td><button class="edit-carton-entry" style="background-color: #FFC107;">Edit</button></td>`;
            cartonEntryTableBody.appendChild(row);

            cartonIdInput.value = '';
            cartonDescriptionInput.value = '';
            cartonQuantityInput.value = '';
        });

        cartonEntryTableBody.addEventListener('click', (event) => {
            if (event.target.classList.contains('edit-carton-entry')) {
                const row = event.target.closest('tr');
                const cartonId = row.cells[0].innerText;
                const cartonDescription = row.cells[1].innerText;
                const cartonQuantity = row.cells[2].innerText;

                cartonIdInput.value = cartonId;
                cartonDescriptionInput.value = cartonDescription;
                cartonQuantityInput.value = cartonQuantity;

                allCartonEntries.pop();
                row.remove();
            }
        });

        previewCartonFileButton.addEventListener('click', () => {
            if (allCarton
